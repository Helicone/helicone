'use client';
"use strict";var e=require("tslib"),t=require("../../../lib/constants.cjs"),a=require("../../../lib/theme.cjs"),l=require("../../../lib/tremorTwMerge.cjs"),r=require("../../../lib/utils.cjs"),i=require("react"),o=require("recharts"),n=require("../common/ChartLegend.cjs"),s=require("../common/ChartTooltip.cjs"),d=require("../common/NoData.cjs"),c=require("../common/utils.cjs");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=u(i);const v=m.default.forwardRef(((u,v)=>{const{data:g=[],categories:h=[],index:f,colors:y=a.themeColorRange,valueFormatter:p=r.defaultValueFormatter,layout:k="horizontal",stack:b=!1,relative:x=!1,startEndOnly:w=!1,animationDuration:E=900,showAnimation:T=!1,showXAxis:C=!0,showYAxis:A=!0,yAxisWidth:j=56,intervalType:L="equidistantPreserveStart",showTooltip:q=!0,showLegend:O=!0,showGridLines:N=!0,autoMinValue:D=!1,minValue:M,maxValue:S,allowDecimals:V=!0,noDataText:F,onValueChange:G,customTooltip:K,rotateLabelX:X,className:B,enableLegendSlider:P=!1}=u,Y=e.__rest(u,["data","categories","index","colors","valueFormatter","layout","stack","relative","startEndOnly","animationDuration","showAnimation","showXAxis","showYAxis","yAxisWidth","intervalType","showTooltip","showLegend","showGridLines","autoMinValue","minValue","maxValue","allowDecimals","noDataText","onValueChange","customTooltip","rotateLabelX","className","enableLegendSlider"]),z=K,R=C||A?20:0,[H,W]=i.useState(60),_=c.constructCategoryColors(h,y),[I,$]=m.default.useState(void 0),[J,Q]=i.useState(void 0),U=!!G;function Z(e,t,a){var l,r,i,o;a.stopPropagation(),G&&(c.deepEqual(I,Object.assign(Object.assign({},e.payload),{value:e.value}))?(Q(void 0),$(void 0),null==G||G(null)):(Q(null===(r=null===(l=e.tooltipPayload)||void 0===l?void 0:l[0])||void 0===r?void 0:r.dataKey),$(Object.assign(Object.assign({},e.payload),{value:e.value})),null==G||G(Object.assign({eventType:"bar",categoryClicked:null===(o=null===(i=e.tooltipPayload)||void 0===i?void 0:i[0])||void 0===o?void 0:o.dataKey},e.payload))))}const ee=c.getYAxisDomain(D,M,S);return m.default.createElement("div",Object.assign({ref:v,className:l.tremorTwMerge("w-full h-80",B)},Y),m.default.createElement(o.ResponsiveContainer,{className:"h-full w-full"},(null==g?void 0:g.length)?m.default.createElement(o.BarChart,{data:g,stackOffset:b?"sign":x?"expand":"none",layout:"vertical"===k?"vertical":"horizontal",onClick:U&&(J||I)?()=>{$(void 0),Q(void 0),null==G||G(null)}:void 0},N?m.default.createElement(o.CartesianGrid,{className:l.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:"vertical"!==k,vertical:"vertical"===k}):null,"vertical"!==k?m.default.createElement(o.XAxis,{padding:{left:R,right:R},hide:!C,dataKey:f,interval:w?"preserveStartEnd":L,tick:{transform:"translate(0, 6)"},ticks:w?[g[0][f],g[g.length-1][f]]:void 0,fill:"",stroke:"",className:l.tremorTwMerge("mt-4 text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,angle:null==X?void 0:X.angle,dy:null==X?void 0:X.verticalShift,height:null==X?void 0:X.xAxisHeight}):m.default.createElement(o.XAxis,{hide:!C,type:"number",tick:{transform:"translate(-3, 0)"},domain:ee,fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,tickFormatter:p,minTickGap:5,allowDecimals:V,angle:null==X?void 0:X.angle,dy:null==X?void 0:X.verticalShift,height:null==X?void 0:X.xAxisHeight}),"vertical"!==k?m.default.createElement(o.YAxis,{width:j,hide:!A,axisLine:!1,tickLine:!1,type:"number",domain:ee,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:x?e=>`${(100*e).toString()} %`:p,allowDecimals:V}):m.default.createElement(o.YAxis,{width:j,hide:!A,dataKey:f,axisLine:!1,tickLine:!1,ticks:w?[g[0][f],g[g.length-1][f]]:void 0,type:"category",interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content")}),m.default.createElement(o.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{fill:"#d1d5db",opacity:"0.15"},content:q?({active:e,payload:a,label:l})=>z?m.default.createElement(z,{payload:null==a?void 0:a.map((e=>{var a;return Object.assign(Object.assign({},e),{color:null!==(a=_.get(e.dataKey))&&void 0!==a?a:t.BaseColors.Gray})})),active:e,label:l}):m.default.createElement(s.default,{active:e,payload:a,label:l,valueFormatter:p,categoryColors:_}):m.default.createElement(m.default.Fragment,null),position:{y:0}}),O?m.default.createElement(o.Legend,{verticalAlign:"top",height:H,content:({payload:e})=>n({payload:e},_,W,J,U?e=>{return t=e,void(U&&(t!==J||I?(Q(t),null==G||G({eventType:"category",categoryClicked:t})):(Q(void 0),null==G||G(null)),$(void 0)));var t}:void 0,P)}):null,h.map((e=>{var i;return m.default.createElement(o.Bar,{className:l.tremorTwMerge(r.getColorClassNames(null!==(i=_.get(e))&&void 0!==i?i:t.BaseColors.Gray,a.colorPalette.background).fillColor,G?"cursor-pointer":""),key:e,name:e,type:"linear",stackId:b||x?"a":void 0,dataKey:e,fill:"",isAnimationActive:T,animationDuration:E,shape:e=>((e,t,a,l)=>{const{fillOpacity:r,name:i,payload:o,value:n}=e;let{x:s,width:d,y:u,height:v}=e;return"horizontal"===l&&v<0?(u+=v,v=Math.abs(v)):"vertical"===l&&d<0&&(s+=d,d=Math.abs(d)),m.default.createElement("rect",{x:s,y:u,width:d,height:v,opacity:t||a&&a!==i?c.deepEqual(t,Object.assign(Object.assign({},o),{value:n}))?r:.3:r})})(e,I,J,k),onClick:Z})}))):m.default.createElement(d,{noDataText:F})))}));v.displayName="BarChart",module.exports=v;
