'use client';
"use strict";var e=require("tslib"),t=require("react"),a=require("recharts"),r=require("../common/ChartLegend.cjs"),o=require("../common/ChartTooltip.cjs"),l=require("../common/NoData.cjs"),n=require("../common/utils.cjs"),i=require("../../../lib/constants.cjs"),s=require("../../../lib/theme.cjs"),d=require("../../../lib/tremorTwMerge.cjs"),c=require("../../../lib/utils.cjs");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=u(t);const y=m.default.forwardRef(((u,y)=>{const{data:k=[],categories:g=[],index:p,colors:v=s.themeColorRange,valueFormatter:h=c.defaultValueFormatter,startEndOnly:f=!1,showXAxis:x=!0,showYAxis:C=!0,yAxisWidth:T=56,intervalType:w="equidistantPreserveStart",animationDuration:L=900,showAnimation:b=!1,showTooltip:E=!0,showLegend:N=!0,showGridLines:K=!0,autoMinValue:j=!1,curveType:A="linear",minValue:D,maxValue:O,connectNulls:q=!1,allowDecimals:V=!0,noDataText:M,className:F,onValueChange:S,enableLegendSlider:W=!1,customTooltip:G,rotateLabelX:P}=u,X=e.__rest(u,["data","categories","index","colors","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","intervalType","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinValue","curveType","minValue","maxValue","connectNulls","allowDecimals","noDataText","className","onValueChange","enableLegendSlider","customTooltip","rotateLabelX"]),B=G,Y=x||C?20:0,[R,_]=t.useState(60),[z,H]=t.useState(void 0),[I,J]=t.useState(void 0),Q=n.constructCategoryColors(g,v),U=n.getYAxisDomain(j,D,O),Z=!!S;function $(e){Z&&(e===I&&!z||n.hasOnlyOneValueForThisKey(k,e)&&z&&z.dataKey===e?(J(void 0),null==S||S(null)):(J(e),null==S||S({eventType:"category",categoryClicked:e})),H(void 0))}return m.default.createElement("div",Object.assign({ref:y,className:d.tremorTwMerge("w-full h-80",F)},X),m.default.createElement(a.ResponsiveContainer,{className:"h-full w-full"},(null==k?void 0:k.length)?m.default.createElement(a.LineChart,{data:k,onClick:Z&&(I||z)?()=>{H(void 0),J(void 0),null==S||S(null)}:void 0},K?m.default.createElement(a.CartesianGrid,{className:d.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!1}):null,m.default.createElement(a.XAxis,{padding:{left:Y,right:Y},hide:!x,dataKey:p,interval:f?"preserveStartEnd":w,tick:{transform:"translate(0, 6)"},ticks:f?[k[0][p],k[k.length-1][p]]:void 0,fill:"",stroke:"",className:d.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,minTickGap:5,angle:null==P?void 0:P.angle,dy:null==P?void 0:P.verticalShift,height:null==P?void 0:P.xAxisHeight}),m.default.createElement(a.YAxis,{width:T,hide:!C,axisLine:!1,tickLine:!1,type:"number",domain:U,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:d.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:h,allowDecimals:V}),m.default.createElement(a.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:E?({active:e,payload:t,label:a})=>B?m.default.createElement(B,{payload:null==t?void 0:t.map((e=>{var t;return Object.assign(Object.assign({},e),{color:null!==(t=Q.get(e.dataKey))&&void 0!==t?t:i.BaseColors.Gray})})),active:e,label:a}):m.default.createElement(o.default,{active:e,payload:t,label:a,valueFormatter:h,categoryColors:Q}):m.default.createElement(m.default.Fragment,null),position:{y:0}}),N?m.default.createElement(a.Legend,{verticalAlign:"top",height:R,content:({payload:e})=>r({payload:e},Q,_,I,Z?e=>$(e):void 0,W)}):null,g.map((e=>{var r;return m.default.createElement(a.Line,{className:d.tremorTwMerge(c.getColorClassNames(null!==(r=Q.get(e))&&void 0!==r?r:i.BaseColors.Gray,s.colorPalette.text).strokeColor),strokeOpacity:z||I&&I!==e?.3:1,activeDot:e=>{var t;const{cx:r,cy:o,stroke:l,strokeLinecap:u,strokeLinejoin:y,strokeWidth:g,dataKey:p}=e;return m.default.createElement(a.Dot,{className:d.tremorTwMerge("stroke-tremor-background dark:stroke-dark-tremor-background",S?"cursor-pointer":"",c.getColorClassNames(null!==(t=Q.get(p))&&void 0!==t?t:i.BaseColors.Gray,s.colorPalette.text).fillColor),cx:r,cy:o,r:5,fill:"",stroke:l,strokeLinecap:u,strokeLinejoin:y,strokeWidth:g,onClick:(t,a)=>function(e,t){t.stopPropagation(),Z&&(e.index===(null==z?void 0:z.index)&&e.dataKey===(null==z?void 0:z.dataKey)||n.hasOnlyOneValueForThisKey(k,e.dataKey)&&I&&I===e.dataKey?(J(void 0),H(void 0),null==S||S(null)):(J(e.dataKey),H({index:e.index,dataKey:e.dataKey}),null==S||S(Object.assign({eventType:"dot",categoryClicked:e.dataKey},e.payload))))}(e,a)})},dot:r=>{var o;const{stroke:l,strokeLinecap:u,strokeLinejoin:y,strokeWidth:g,cx:p,cy:v,dataKey:h,index:f}=r;return n.hasOnlyOneValueForThisKey(k,e)&&!(z||I&&I!==e)||(null==z?void 0:z.index)===f&&(null==z?void 0:z.dataKey)===e?m.default.createElement(a.Dot,{key:f,cx:p,cy:v,r:5,stroke:l,fill:"",strokeLinecap:u,strokeLinejoin:y,strokeWidth:g,className:d.tremorTwMerge("stroke-tremor-background dark:stroke-dark-tremor-background",S?"cursor-pointer":"",c.getColorClassNames(null!==(o=Q.get(h))&&void 0!==o?o:i.BaseColors.Gray,s.colorPalette.text).fillColor)}):m.default.createElement(t.Fragment,{key:f})},key:e,name:e,type:A,dataKey:e,stroke:"",strokeWidth:2,strokeLinejoin:"round",strokeLinecap:"round",isAnimationActive:b,animationDuration:L,connectNulls:q})})),S?g.map((e=>m.default.createElement(a.Line,{className:d.tremorTwMerge("cursor-pointer"),strokeOpacity:0,key:e,name:e,type:A,dataKey:e,stroke:"transparent",fill:"transparent",legendType:"none",tooltipType:"none",strokeWidth:12,connectNulls:q,onClick:(e,t)=>{t.stopPropagation();const{name:a}=e;$(a)}}))):null):m.default.createElement(l,{noDataText:M})))}));y.displayName="LineChart",module.exports=y;
