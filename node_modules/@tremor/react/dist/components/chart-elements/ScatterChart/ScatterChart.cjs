'use client';
"use strict";var e=require("tslib"),t=require("react"),a=require("recharts"),l=require("../common/ChartLegend.cjs"),r=require("./ScatterChartTooltip.cjs"),o=require("../common/NoData.cjs"),i=require("../common/utils.cjs"),n=require("../../../lib/constants.cjs"),s=require("../../../lib/theme.cjs"),u=require("../../../lib/tremorTwMerge.cjs"),c=require("../../../lib/utils.cjs");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=d(t);const v=m.default.forwardRef(((d,v)=>{const{data:g=[],x:y,y:f,size:p,category:h,colors:x=s.themeColorRange,showOpacity:w=!1,sizeRange:b=[1,1e3],valueFormatter:k={x:c.defaultValueFormatter,y:c.defaultValueFormatter,size:c.defaultValueFormatter},startEndOnly:C=!1,showXAxis:E=!0,showYAxis:T=!0,yAxisWidth:A=56,intervalType:V="equidistantPreserveStart",animationDuration:D=900,showAnimation:q=!1,showTooltip:L=!0,showLegend:j=!0,showGridLines:S=!0,autoMinXValue:N=!1,minXValue:O,maxXValue:X,autoMinYValue:Y=!1,minYValue:M,maxYValue:F,allowDecimals:z=!0,noDataText:G,onValueChange:R,customTooltip:P,rotateLabelX:B,className:K,enableLegendSlider:W=!1}=d,_=e.__rest(d,["data","x","y","size","category","colors","showOpacity","sizeRange","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","intervalType","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinXValue","minXValue","maxXValue","autoMinYValue","minYValue","maxYValue","allowDecimals","noDataText","onValueChange","customTooltip","rotateLabelX","className","enableLegendSlider"]),H=P,[Z,$]=t.useState(60),[I,J]=m.default.useState(void 0),[Q,U]=t.useState(void 0),ee=!!R;function te(e,t,a){a.stopPropagation(),ee&&(i.deepEqual(I,e.node)?(U(void 0),J(void 0),null==R||R(null)):(J(e.node),U(e.payload[h]),null==R||R(Object.assign({eventType:"bubble",categoryClicked:e.payload[h]},e.payload))))}const ae=i.constructCategories(g,h),le=i.constructCategoryColors(ae,x),re=i.getYAxisDomain(N,O,X),oe=i.getYAxisDomain(Y,M,F);return m.default.createElement("div",Object.assign({ref:v,className:u.tremorTwMerge("w-full h-80",K)},_),m.default.createElement(a.ResponsiveContainer,{className:"h-full w-full"},(null==g?void 0:g.length)?m.default.createElement(a.ScatterChart,{onClick:ee&&(Q||I)?()=>{J(void 0),U(void 0),null==R||R(null)}:void 0,margin:{left:20,right:20}},S?m.default.createElement(a.CartesianGrid,{className:u.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!0}):null,y?m.default.createElement(a.XAxis,{hide:!E,dataKey:y,interval:C?"preserveStartEnd":V,tick:{transform:"translate(0, 6)"},ticks:C?[g[0][y],g[g.length-1][y]]:void 0,type:"number",name:y,fill:"",stroke:"",className:u.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,tickFormatter:k.x,axisLine:!1,minTickGap:5,domain:re,allowDataOverflow:!0,angle:null==B?void 0:B.angle,dy:null==B?void 0:B.verticalShift,height:null==B?void 0:B.xAxisHeight}):null,f?m.default.createElement(a.YAxis,{width:A,hide:!T,axisLine:!1,tickLine:!1,dataKey:f,type:"number",name:f,domain:oe,tick:{transform:"translate(-3, 0)"},tickFormatter:k.y,fill:"",stroke:"",className:u.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),allowDecimals:z,allowDataOverflow:!0}):null,m.default.createElement(a.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:L?({active:e,payload:t,label:a})=>{var l,o;const i=h?null===(o=null===(l=null==t?void 0:t[0])||void 0===l?void 0:l.payload)||void 0===o?void 0:o[h]:a;return H?m.default.createElement(H,{payload:null==t?void 0:t.map((e=>{var t;return Object.assign(Object.assign({},e),{color:null!==(t=le.get(i))&&void 0!==t?t:n.BaseColors.Gray})})),active:e,label:i}):m.default.createElement(r.default,{active:e,payload:t,label:i,valueFormatter:k,axis:{x:y,y:f,size:p},category:h,categoryColors:le})}:m.default.createElement(m.default.Fragment,null)}),p?m.default.createElement(a.ZAxis,{dataKey:p,type:"number",range:b,name:p}):null,ae.map((e=>{var t,l;return m.default.createElement(a.Scatter,{className:u.tremorTwMerge(c.getColorClassNames(null!==(t=le.get(e))&&void 0!==t?t:n.BaseColors.Gray,s.colorPalette.text).fillColor,w?c.getColorClassNames(null!==(l=le.get(e))&&void 0!==l?l:n.BaseColors.Gray,s.colorPalette.text).strokeColor:"",R?"cursor-pointer":""),fill:`url(#${le.get(e)})`,fillOpacity:w?.7:1,key:e,name:e,data:h?g.filter((t=>t[h]===e)):g,isAnimationActive:q,animationDuration:D,shape:e=>((e,t,l)=>{const{cx:r,cy:o,width:n,node:s,fillOpacity:u,name:c}=e;return m.default.createElement(a.Dot,{cx:r,cy:o,r:n/2,opacity:t||l&&l!==c?i.deepEqual(t,s)?u:.3:u})})(e,I,Q),onClick:te})})),j?m.default.createElement(a.Legend,{verticalAlign:"top",height:Z,content:({payload:e})=>l({payload:e},le,$,Q,ee?e=>{return t=e,void(ee&&(t!==Q||I?(U(t),null==R||R({eventType:"category",categoryClicked:t})):(U(void 0),null==R||R(null)),J(void 0)));var t}:void 0,W)}):null):m.default.createElement(o,{noDataText:G})))}));v.displayName="ScatterChart",module.exports=v;
