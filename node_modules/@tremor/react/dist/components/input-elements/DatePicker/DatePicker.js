'use client';
import{__rest as e}from"tslib";import{border as r}from"../../../lib/shape.js";import{sizing as t}from"../../../lib/sizing.js";import{spacing as a}from"../../../lib/spacing.js";import{tremorTwMerge as o}from"../../../lib/tremorTwMerge.js";import n,{useMemo as l}from"react";import{startOfToday as d,startOfMonth as s}from"date-fns";import{enUS as i}from"date-fns/locale";import{Popover as m,Transition as c}from"@headlessui/react";import u from"../../../assets/CalendarIcon.js";import f from"../../../assets/XCircleIcon.js";import b from"../Calendar/Calendar.js";import{makeDatePickerClassName as p}from"./datePickerUtils.js";import g from"../../../hooks/useInternalState.js";import{formatSelectedDates as k}from"../DateRangePicker/dateRangePickerUtils.js";import{getSelectButtonColors as h,hasValue as w}from"../selectUtils.js";const v=d(),x=n.forwardRef(((d,x)=>{var y;const{value:N,defaultValue:j,onValueChange:D,minDate:C,maxDate:E,placeholder:R="Select date",disabled:X=!1,locale:S=i,enableClear:O=!0,displayFormat:P,className:F,enableYearNavigation:I=!1,weekStartsOn:T=0,disabledDates:V}=d,Y=e(d,["value","defaultValue","onValueChange","minDate","maxDate","placeholder","disabled","locale","enableClear","displayFormat","className","enableYearNavigation","weekStartsOn","disabledDates"]),[M,U]=g(j,N),z=l((()=>{const e=[];return C&&e.push({before:C}),E&&e.push({after:E}),[...e,...null!=V?V:[]]}),[C,E,V]),B=M?k(M,void 0,S,P):R,L=s(null!==(y=null!=M?M:E)&&void 0!==y?y:v),q=O&&!X;return n.createElement(m,Object.assign({ref:x,as:"div",className:o("relative w-full min-w-[10rem] text-tremor-default","focus:ring-2 focus:ring-tremor-brand-muted dark:focus:ring-dark-tremor-brand-muted",F)},Y),n.createElement(m.Button,{disabled:X,className:o("w-full outline-none text-left whitespace-nowrap truncate focus:ring-2 transition duration-100 rounded-tremor-default flex flex-nowrap","border-tremor-border shadow-tremor-input text-tremor-content-emphasis focus:border-tremor-brand-subtle focus:ring-tremor-brand-muted","dark:border-dark-tremor-border dark:shadow-dark-tremor-input dark:text-dark-tremor-content-emphasis dark:focus:border-dark-tremor-brand-subtle dark:focus:ring-dark-tremor-brand-muted",a.lg.paddingLeft,q?a.fourXl.paddingRight:a.twoXl.paddingRight,a.sm.paddingY,r.sm.all,h(w(M),X))},n.createElement(u,{className:o(p("calendarIcon"),"flex-none shrink-0","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",t.lg.height,t.lg.width,a.threeXs.negativeMarginLeft,a.sm.marginRight),"aria-hidden":"true"}),n.createElement("p",{className:"truncate"},B)),q&&M?n.createElement("button",{type:"button",className:o("absolute outline-none inset-y-0 right-0 flex items-center transition duration-100",a.twoXl.marginRight),onClick:e=>{e.preventDefault(),null==D||D(void 0),U(void 0)}},n.createElement(f,{className:o("flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",t.md.height,t.md.width)})):null,n.createElement(c,{className:"absolute z-10 min-w-min left-0",enter:"transition ease duration-100 transform",enterFrom:"opacity-0 -translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"transition ease duration-100 transform",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-4"},n.createElement(m.Panel,{className:o("divide-y overflow-y-auto outline-none rounded-tremor-default p-3","bg-tremor-background border-tremor-border divide-tremor-border shadow-tremor-dropdown","dark:bg-dark-tremor-background dark:border-dark-tremor-border dark:divide-dark-tremor-border dark:shadow-dark-tremor-dropdown",a.twoXs.marginTop,a.twoXs.marginBottom,r.sm.all)},(({close:e})=>n.createElement(b,{showOutsideDays:!0,mode:"single",defaultMonth:L,selected:M,weekStartsOn:T,onSelect:r=>{null==D||D(r),U(r),e()},locale:S,disabled:z,enableYearNavigation:I})))))}));x.displayName="DatePicker";export{x as default};
