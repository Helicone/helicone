'use client';
import{__rest as e}from"tslib";import t from"../../../hooks/useInternalState.js";import r,{useState as a,useMemo as o,isValidElement as l}from"react";import{border as n}from"../../../lib/shape.js";import{sizing as d}from"../../../lib/sizing.js";import{spacing as m}from"../../../lib/spacing.js";import{tremorTwMerge as s}from"../../../lib/tremorTwMerge.js";import{makeClassName as i}from"../../../lib/utils.js";import{Combobox as c,Transition as u}from"@headlessui/react";import p from"../../../assets/ArrowDownHeadIcon.js";import f from"../../../assets/XCircleIcon.js";import{constructValueToNameMapping as b,getFilteredOptions as h,getSelectButtonColors as g,hasValue as k}from"../selectUtils.js";const w=i("SearchSelect"),x=i("SearchSelect"),v=r.forwardRef(((i,v)=>{const{defaultValue:y,value:N,onValueChange:E,placeholder:C="Select...",disabled:j=!1,icon:S,enableClear:I=!0,children:T,className:V}=i,X=e(i,["defaultValue","value","onValueChange","placeholder","disabled","icon","enableClear","children","className"]),[D,F]=a(""),[M,R]=t(y,N),z=S,{reactElementChildren:A,valueToNameMapping:B}=o((()=>{const e=r.Children.toArray(T).filter(l);return{reactElementChildren:e,valueToNameMapping:b(e)}}),[T]),L=o((()=>h(D,A)),[D,A]);return r.createElement(c,Object.assign({as:"div",ref:v,defaultValue:M,value:M,onChange:e=>{null==E||E(e),R(e)},disabled:j,className:s("w-full min-w-[10rem] relative text-tremor-default",V)},X),(({value:e})=>r.createElement(r.Fragment,null,r.createElement(c.Button,{className:"w-full"},z&&r.createElement("span",{className:s("absolute inset-y-0 left-0 flex items-center ml-px",m.md.paddingLeft)},r.createElement(z,{className:s(w("Icon"),"flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",d.lg.height,d.lg.width)})),r.createElement(c.Input,{className:s("w-full outline-none text-left whitespace-nowrap truncate rounded-tremor-default focus:ring-2 transition duration-100 text-tremor-default pr-14","border-tremor-border shadow-tremor-input focus:border-tremor-brand-subtle focus:ring-tremor-brand-muted","dark:border-dark-tremor-border dark:shadow-dark-tremor-input dark:focus:border-dark-tremor-brand-subtle dark:focus:ring-dark-tremor-brand-muted",z?"p-10 -ml-0.5":m.lg.paddingLeft,m.sm.paddingY,n.sm.all,j?"placeholder:text-tremor-content-subtle dark:placeholder:text-tremor-content-subtle":"placeholder:text-tremor-content dark:placeholder:text-tremor-content",g(k(e),j)),placeholder:C,onChange:e=>F(e.target.value),displayValue:e=>{var t;return null!==(t=B.get(e))&&void 0!==t?t:""}}),r.createElement("div",{className:s("absolute inset-y-0 right-0 flex items-center",m.md.paddingRight)},r.createElement(p,{className:s(w("arrowDownIcon"),"flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",d.md.height,d.md.width)}))),I&&M?r.createElement("button",{type:"button",className:s("absolute inset-y-0 right-0 flex items-center",m.fourXl.marginRight),onClick:e=>{e.preventDefault(),R(""),F(""),null==E||E("")}},r.createElement(f,{className:s(x("clearIcon"),"flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",d.md.height,d.md.width)})):null,L.length>0&&r.createElement(u,{className:"absolute z-10 w-full",enter:"transition ease duration-100 transform",enterFrom:"opacity-0 -translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"transition ease duration-100 transform",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-4"},r.createElement(c.Options,{className:s("divide-y overflow-y-auto outline-none rounded-tremor-default text-tremor-default max-h-[228px] left-0","bg-tremor-background border-tremor-border divide-tremor-border shadow-tremor-dropdown","dark:bg-dark-tremor-background dark:border-dark-tremor-border dark:divide-dark-tremor-border dark:shadow-dark-tremor-dropdown",m.twoXs.marginTop,m.twoXs.marginBottom,n.sm.all)},L)))))}));v.displayName="SearchSelect";export{v as default};
