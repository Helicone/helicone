"use strict";var e=require("tslib"),t=require("react"),r=require("../../../lib/sizing.cjs"),l=require("../../../lib/spacing.cjs"),o=require("../../../lib/theme.cjs"),n=require("../../../lib/tremorTwMerge.cjs"),a=require("../../../lib/utils.cjs"),s=require("../../../assets/ChevronLeftFill.cjs"),i=require("../../../assets/ChevronRightFill.cjs");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=u(t);const d=a.makeClassName("Legend"),m=({name:e,color:t,onClick:s,activeLegend:i})=>{const u=!!s;return c.default.createElement("li",{className:n.tremorTwMerge(d("legendItem"),"group inline-flex items-center px-2 py-0.5 rounded-tremor-small transition whitespace-nowrap",u?"cursor-pointer":"cursor-default","text-tremor-content",u?"hover:bg-tremor-background-subtle":"","dark:text-dark-tremor-content",u?"dark:hover:bg-dark-tremor-background-subtle":""),onClick:r=>{r.stopPropagation(),null==s||s(e,t)}},c.default.createElement("svg",{className:n.tremorTwMerge("flex-none",a.getColorClassNames(t,o.colorPalette.text).textColor,r.sizing.xs.height,r.sizing.xs.width,l.spacing.xs.marginRight,i&&i!==e?"opacity-40":"opacity-100"),fill:"currentColor",viewBox:"0 0 8 8"},c.default.createElement("circle",{cx:4,cy:4,r:4})),c.default.createElement("p",{className:n.tremorTwMerge("whitespace-nowrap truncate text-tremor-default","text-tremor-content",u?"group-hover:text-tremor-content-emphasis":"","dark:text-dark-tremor-content",i&&i!==e?"opacity-40":"opacity-100",u?"dark:group-hover:text-dark-tremor-content-emphasis":"")},e))},f=({icon:e,onClick:r,disabled:l})=>{const o=e,[a,s]=c.default.useState(!1),i=c.default.useRef(null);return c.default.useEffect((()=>(a?i.current=setInterval((()=>{null==r||r()}),300):clearInterval(i.current),()=>clearInterval(i.current))),[a,r]),t.useEffect((()=>{l&&(clearInterval(i.current),s(!1))}),[l]),c.default.createElement("button",{type:"button",className:n.tremorTwMerge(d("legendSliderButton"),"w-5 group inline-flex items-center truncate rounded-tremor-small transition",l?"cursor-not-allowed":"ursor-pointer",l?"text-tremor-content-subtle":"text-tremor-content hover:text-tremor-content-emphasis hover:bg-tremor-background-subtle",l?"dark:text-dark-tremor-subtle":"dark:text-dark-tremor dark:hover:text-tremor-content-emphasis dark:hover:bg-dark-tremor-background-subtle"),disabled:l,onClick:e=>{e.stopPropagation(),null==r||r()},onMouseDown:e=>{e.stopPropagation(),s(!0)},onMouseUp:e=>{e.stopPropagation(),s(!1)}},c.default.createElement(o,{className:"w-full"}))},g=c.default.forwardRef(((r,l)=>{var a,u;const{categories:g,colors:v=o.themeColorRange,className:p,onClickLegendItem:b,activeLegend:h,enableLegendSlider:k=!1}=r,w=e.__rest(r,["categories","colors","className","onClickLegendItem","activeLegend","enableLegendSlider"]),x=c.default.useRef(null),[E,L]=c.default.useState(null),[y,C]=c.default.useState(null),N=c.default.useRef(null),M=t.useCallback((()=>{const e=null==x?void 0:x.current;if(!e)return;const t=e.scrollLeft>0,r=e.scrollWidth-e.clientWidth>e.scrollLeft;L({left:t,right:r})}),[L]),T=t.useCallback((e=>{var t;const r=null==x?void 0:x.current,l=null!==(t=null==r?void 0:r.clientWidth)&&void 0!==t?t:0;r&&k&&(r.scrollTo({left:"left"===e?r.scrollLeft-l:r.scrollLeft+l,behavior:"smooth"}),setTimeout((()=>{M()}),400))}),[k,M]);c.default.useEffect((()=>{const e=e=>{"ArrowLeft"===e?T("left"):"ArrowRight"===e&&T("right")};return y?(e(y),N.current=setInterval((()=>{e(y)}),300)):clearInterval(N.current),()=>clearInterval(N.current)}),[y,T]);const I=e=>{e.stopPropagation(),"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(e.preventDefault(),C(e.key))},j=e=>{e.stopPropagation(),C(null)};return c.default.useEffect((()=>{const e=null==x?void 0:x.current;return k&&(M(),null==e||e.addEventListener("keydown",I),null==e||e.addEventListener("keyup",j)),()=>{null==e||e.removeEventListener("keydown",I),null==e||e.removeEventListener("keyup",j)}}),[M,k]),c.default.createElement("ol",Object.assign({ref:l,className:n.tremorTwMerge(d("root"),"relative overflow-hidden",p)},w),c.default.createElement("div",{ref:x,tabIndex:0,className:n.tremorTwMerge("h-full flex",k?(null==E?void 0:E.right)||(null==E?void 0:E.left)?"pl-4 pr-12  items-center overflow-auto snap-mandatory [&::-webkit-scrollbar]:hidden [scrollbar-width:none]":"":"flex-wrap")},g.map(((e,t)=>c.default.createElement(m,{key:`item-${t}`,name:e,color:v[t],onClick:b,activeLegend:h})))),k&&((null==E?void 0:E.right)||(null==E?void 0:E.left))?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:n.tremorTwMerge("absolute top-0 bottom-0 left-0 w-4 bg-gradient-to-r from-white to-transparent pointer-events-none")}),c.default.createElement("div",{className:n.tremorTwMerge("absolute top-0 bottom-0 right-10 w-4 bg-gradient-to-r from-transparent to-white pointer-events-none")}),c.default.createElement("div",{className:n.tremorTwMerge("absolute flex top-0 pr-1 bottom-0 right-0 items-center justify-center h-full bg-tremor-background")},c.default.createElement(f,{icon:s,onClick:()=>{C(null),T("left")},disabled:null===(a=!(null==E?void 0:E.left))||void 0===a||a}),c.default.createElement(f,{icon:i,onClick:()=>{C(null),T("right")},disabled:null===(u=!(null==E?void 0:E.right))||void 0===u||u}))):null)}));g.displayName="Legend",module.exports=g;
