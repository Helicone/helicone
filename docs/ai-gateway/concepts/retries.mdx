---
title: "Automatic Retries"
sidebarTitle: "Retries"
description: "Customizable backoff retry logic for failed AI provider requests"
---

The AI Gateway automatically retries transient errors from AI providers using configurable strategies, improving reliability without overwhelming providers with rapid successive requests.

Retries use smart failure detection with configurable maximum attempts, backoff timing, and are configurable either globally or
per-router.

## Getting Started

### Why Use Retries?

Retries help you:
- **Improve reliability** by automatically recovering from transient provider failures
- **Handle network issues** by retrying requests that fail due to connectivity problems
- **Maintain user experience** by transparently recovering from failures

<Info>
  **Rate limit handling is automatic** - when providers return 429 status codes, the AI Gateway automatically removes them from load balancing rotation. Retries are for handling other types of failures like 5xx errors or network issues.
</Info>

<Note>
  For complete configuration options and syntax, see the [Configuration Reference](/ai-gateway/config#retries).
</Note>

### How Retries Work

The AI Gateway automatically retries failed requests using the configured strategy.

There are two different strategies available for retries, either `constant`, or `exponential`. All retry
strategies have jitter enabled.

**What gets retried:** 5xx server errors and network connectivity issues  
**What doesn't:** 4xx client errors, rate limits (handled by load balancing), and successful responses

<Steps>
  <Step title="Request Fails">
    Request fails with a retryable error (5xx server error or network issue)
  </Step>
  
  <Step title="Wait Period">
    AI Gateway waits for the calculated backoff period based on the given strategy
  </Step>
  
  <Step title="Retry Request">
    Request is retried with the same parameters to the same provider
  </Step>
  
  <Step title="Repeat or Return">
    Process repeats until success or max retries reached
  </Step>
</Steps>

### Configuration Examples

<Tabs>
  <Tab title="Production API - Reliable Service">
    **Use case:** Production API that needs high reliability and can tolerate slightly higher latency for better success rates.

    ```yaml
    global:
      retries:
        strategy: "constant"
        delay: "50ms"
        max-retries: 3
    ```
    
    **Timing:** 50ms → 100ms → 150ms → fail (up to 7 seconds total retry time)
  </Tab>

  <Tab title="Batch Processing - Maximum Reliability">
    **Use case:** Background batch processing where reliability is more important than latency.

    ```yaml
    global:
      retries:
        strategy: "exponential"
        min-delay: "200ms"
        max-delay: "60s"
        max-retries: 5
        factor: 2.0
    ```
    
    **Timing:** 200ms → 400ms → 800ms → 1.6s → 3.2s → fail (up to 62 seconds total retry time)
  </Tab>
</Tabs>

## Reference

#### Default Behavior

Retries are disabled by default to provide predictable behavior. Enable them explicitly where needed.

### Retry Behavior Details

#### What Gets Retried

| Condition | Retried? | Reason | Examples |
|-----------|----------|---------|----------|
| **5xx Server Errors** | ✅ Yes | Temporary provider issues | `500 Internal Server Error`, `502 Bad Gateway`, `503 Service Unavailable`, `504 Gateway Timeout` |
| **Network Transport Errors** | ✅ Yes | Connection/network problems | Connection refused, timeouts, DNS failures, TLS handshake errors |
| **Stream Interruptions** | ✅ Yes | Streaming response failures | Stream ended unexpectedly, transport errors during streaming |
| **4xx Client Errors** | ❌ No | Request format/auth issues | `400 Bad Request`, `401 Unauthorized`, `403 Forbidden`, `404 Not Found`, `422 Unprocessable Entity` |
| **429 Rate Limits** | ❌ No | Handled by load balancing | Provider temporarily removed from rotation based on `Retry-After` header |
| **2xx Success Responses** | ❌ No | Request succeeded | `200 OK`, `201 Created`, `202 Accepted` |
| **Auth/Config Errors** | ❌ No | Setup/configuration issues | Invalid Helicone API keys, missing auth headers, provider not configured |
| **Cache/Storage Errors** | ❌ No | Persistent storage issues | Cache operation failures, malformed request/response bodies |


#### Load Balancing Integration

Retries and [load balancing](/ai-gateway/features/loadbalancing) work together to maximize reliability:

- **Per-request:** When a request fails, retries attempt the same provider multiple times
- **Per-provider:** If a provider keeps failing requests, health monitoring removes it from the load balancer
- **Result:** New requests automatically go to healthy providers while failed requests still get retried


