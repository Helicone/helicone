---
title: "Get Requests"
sidebarTitle: "Get Requests"
description: "Retrieve all requests visible in the request table at Helicone."
"twitter:title": "Get Requests - Helicone OSS LLM Observability"
openapi: post /v1/request/query-clickhouse
---

import EUAPIWarning from "/snippets/eu-api-warning.mdx";

<EUAPIWarning />

<CardGroup cols={3}>
  <Card
    title="NPM Package (Recommended)"
    href="https://www.npmjs.com/package/@helicone/export"
    icon="npm"
  >
    Use our CLI tool: `npx @helicone/export` - No installation required!
  </Card>
  <Card
    title="Python Example"
    href="https://github.com/Helicone/helicone/tree/main/examples/export/python"
    icon="python"
  >
    See how to query requests using our Python SDK.
  </Card>
  <Card
    title="TypeScript Example"
    href="https://github.com/Helicone/helicone/tree/main/examples/export/typescript"
    icon="code"
  >
    Learn to fetch requests with TypeScript/JavaScript.
  </Card>
</CardGroup>

## Quick Start with NPM

The easiest way to export data is using our CLI tool:

```bash
# Export with npx (no installation required)
HELICONE_API_KEY="your-api-key" npx @helicone/export --start-date 2024-01-01 --limit 10000 --include-body

# With property filter
HELICONE_API_KEY="your-api-key" npx @helicone/export --property appname=MyApp --format csv --include-body

# With date range and full bodies
HELICONE_API_KEY="your-api-key" npx @helicone/export --start-date 2024-08-01 --end-date 2024-08-31 --include-body

# Export from EU region
HELICONE_API_KEY="your-eu-api-key" npx @helicone/export --region eu --limit 10000 --include-body
```

**Key Features:**
- ‚úÖ Auto-recovery from crashes with checkpoint system
- ‚úÖ Retry logic with exponential backoff
- ‚úÖ Progress tracking with ETA
- ‚úÖ Multiple output formats (JSON, JSONL, CSV)
- ‚úÖ Region support (US and EU)

See the [full documentation](https://github.com/Helicone/helicone/tree/main/examples/export/typescript) for more options.

The following API is the same as the [Get Requests](/rest/request/post-v1requestquery) API, but it is optimized for speed when querying large amount of data. This endpoint will timeout for point queries and is really slow when querying just a few requests.

The following API lets you get all of the requests
that would be visible in the request table at
[helicone.ai/requests](https://helicone.ai/requests).

### Premade examples üëá

| Filter                                                         | Description                         |
| -------------------------------------------------------------- | ----------------------------------- |
| [Get Request by User](/guides/cookbooks/getting-user-requests) | Get all the requests made by a user |

### Filter Structure

<Warning>
  **Common Mistake:** When filtering by **custom properties**, you MUST wrap them in a `request_response_rmt` object. Forgetting this wrapper will return empty results `{"data":[],"error":null}` even when data exists.

  ```json
  // ‚ùå WRONG - Missing request_response_rmt wrapper
  {
    "filter": {
      "properties": {
        "ticket-id": { "equals": "..." }
      }
    }
  }

  // ‚úÖ CORRECT - Properties wrapped in request_response_rmt
  {
    "filter": {
      "request_response_rmt": {
        "properties": {
          "ticket-id": { "equals": "..." }
        }
      }
    }
  }
  ```

  See the [Filtering by Properties](#filtering-by-properties) section below for complete examples.
</Warning>

<Note>
  **Important:** Filters use an AST (Abstract Syntax Tree) structure where **each condition must be a separate leaf node**. You cannot combine multiple conditions in a single `request_response_rmt` object.
</Note>

A filter is either a **FilterLeaf** or a **FilterBranch**, and can be composed of multiple filters generating an [AST](https://en.wikipedia.org/wiki/Abstract_syntax_tree) of ANDs/ORs.

#### TypeScript Types

```ts
export interface FilterBranch {
  left: FilterNode;
  operator: "or" | "and";
  right: FilterNode;
}

export type FilterLeaf = {
  request_response_rmt: {
    [field: string]: {
      [operator: string]: any;
    };
  };
};

export type FilterNode = FilterLeaf | FilterBranch | "all";
```

#### Simple Filter (Single Condition)

```json
{
  "filter": {
    "request_response_rmt": {
      "model": {
        "contains": "gpt-4"
      }
    }
  }
}
```

#### Complex Filter (Multiple Conditions)

**Each condition is a separate leaf, connected with `and`/`or` operators:**

```json
{
  "filter": {
    "left": {
      "request_response_rmt": {
        "model": {
          "contains": "gpt-4"
        }
      }
    },
    "operator": "and",
    "right": {
      "request_response_rmt": {
        "user_id": {
          "equals": "abc@email.com"
        }
      }
    }
  }
}
```

#### Match All Requests (No Filter)

```json
{
  "filter": "all"
}
```

### Filtering by Date Range

<Note>
  Date ranges use **inclusive** bounds - both `gte` (greater than or equal) and `lte` (less than or equal) include the specified timestamps.
</Note>

**Single date filter:**

```json
{
  "filter": {
    "request_response_rmt": {
      "request_created_at": {
        "gte": "2024-01-01T00:00:00Z"
      }
    }
  }
}
```

**Date range (start AND end):**

<Warning>
  **Important:** Each date condition must be a separate leaf! Don't put both `gte` and `lte` in the same object.
</Warning>

```json
{
  "filter": {
    "left": {
      "request_response_rmt": {
        "request_created_at": {
          "gte": "2024-01-01T00:00:00Z"
        }
      }
    },
    "operator": "and",
    "right": {
      "request_response_rmt": {
        "request_created_at": {
          "lte": "2024-12-31T23:59:59Z"
        }
      }
    }
  }
}
```

**Available date operators:**
- `gte` - Greater than or equal (start date, inclusive)
- `lte` - Less than or equal (end date, inclusive)
- `gt` - Greater than (exclusive)
- `lt` - Less than (exclusive)
- `equals` - Exact timestamp match

### Filtering by Properties

<Note>
  **Important:** When filtering by custom properties, you must nest the `properties` filter inside a `request_response_rmt` object.
</Note>

**Single property:**

```json
{
  "filter": {
    "request_response_rmt": {
      "properties": {
        "environment": {
          "equals": "production"
        }
      }
    }
  }
}
```

**Combining property filter with other filters:**

```json
{
  "filter": {
    "left": {
      "request_response_rmt": {
        "model": {
          "equals": "gpt-4"
        }
      }
    },
    "operator": "and",
    "right": {
      "request_response_rmt": {
        "properties": {
          "environment": {
            "equals": "production"
          }
        }
      }
    }
  }
}
```

### Complete Example: Date Range + Property Filter

This example shows how to combine a date range with a property filter:

```json
{
  "filter": {
    "left": {
      "left": {
        "request_response_rmt": {
          "request_created_at": {
            "gte": "2024-08-01T00:00:00Z"
          }
        }
      },
      "operator": "and",
      "right": {
        "request_response_rmt": {
          "request_created_at": {
            "lte": "2024-08-31T23:59:59Z"
          }
        }
      }
    },
    "operator": "and",
    "right": {
      "request_response_rmt": {
        "properties": {
          "appname": {
            "equals": "LlamaCoder"
          }
        }
      }
    }
  },
  "limit": 100,
  "offset": 0
}
```

### Available Filter Operators

Different fields support different operators:

**Text fields** (`model`, `user_id`, `provider`, etc.):
- `equals` / `not-equals`
- `like` / `ilike` (case-insensitive)
- `contains` / `not-contains`

**Number fields** (`status`, `latency`, `cost`, etc.):
- `equals` / `not-equals`
- `gte` / `lte` / `gt` / `lt`

**Timestamp fields** (`request_created_at`, `response_created_at`):
- `equals`
- `gte` / `lte` / `gt` / `lt`

## Troubleshooting

### Getting Empty Results `{"data":[],"error":null}`

If you're getting empty results when you know data exists, check these common issues:

**1. Missing `request_response_rmt` wrapper for properties**

<Accordion title="‚ùå WRONG - Properties without wrapper">
```bash
curl --request POST \
  --url https://api.helicone.ai/v1/request/query-clickhouse \
  --header "Content-Type: application/json" \
  --header "authorization: Bearer $HELICONE_API_KEY" \
  --data '{
  "filter": {
    "properties": {
      "ticket-id": {
        "equals": "ba9bf8b3-c04f-41ad-9362-37f8feff7e57"
      }
    }
  }
}'
```
**Result:** Empty data even though the property exists
</Accordion>

<Accordion title="‚úÖ CORRECT - Properties with request_response_rmt wrapper">
```bash
curl --request POST \
  --url https://api.helicone.ai/v1/request/query-clickhouse \
  --header "Content-Type: application/json" \
  --header "authorization: Bearer $HELICONE_API_KEY" \
  --data '{
  "filter": {
    "request_response_rmt": {
      "properties": {
        "ticket-id": {
          "equals": "ba9bf8b3-c04f-41ad-9362-37f8feff7e57"
        }
      }
    }
  }
}'
```
**Result:** Returns all requests with that property value
</Accordion>

**2. Using wrong API endpoint structure**

This endpoint (`/query-clickhouse`) requires `request_response_rmt` wrapper for ALL filters including properties. If you're using the legacy `/query` endpoint, the filter structure is different - see [Get Requests (Legacy)](/rest/request/post-v1requestquery).

**3. Wrong region**

Make sure you're using the correct regional endpoint:
- US: `https://api.helicone.ai/v1/request/query-clickhouse`
- EU: `https://eu.api.helicone.ai/v1/request/query-clickhouse`

**4. Property name doesn't match**

Property names are case-sensitive. Check your exact property name in the [Helicone dashboard](https://helicone.ai/requests).
