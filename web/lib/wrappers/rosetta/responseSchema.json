{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "llm_type": {
      "type": "string",
      "description": "Specifies the nature of the interaction with the model. A 'chat' type indicates a conversational approach, potentially involving multiple exchanges, and is structured to facilitate ongoing interaction. In contrast, a 'completion' type represents a direct response to a specific prompt, often used to generate text based on the initial input, without the context of a back-and-forth conversation. The structure of both the request and response will vary accordingly.",
      "enum": ["chat", "completion"]
    },
    "completions": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Text generated by the model in response to a prompt. Used exclusively for 'completion' requests, this may include multiple iterations based on the same prompt, facilitating the selection of the most suitable output."
    },
    "message": {
      "type": "object",
      "properties": {
        "role": {
          "type": "string",
          "description": "Role of the message sender."
        },
        "content": {
          "type": "string",
          "description": "Textual content of the message."
        },
        "function_name": {
          "type": "string",
          "description": "Specifies a function called within the message, if applicable."
        },
        "function_arguments": {
          "type": "object",
          "description": "Arguments used in the function call, if any, within the message."
        }
      },
      "description": "Used in 'chat' interactions, this field holds the conversation's content, structured as either a single message or an array of sequential messages, adapting to the flow of the conversation."
    },
    "error": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string",
          "description": "An error code representing the type of error."
        },
        "message": {
          "type": "string",
          "description": "The error message, providing details of the error that occurred."
        }
      },
      "additionalProperties": false,
      "description": "Object containing information about any error that occurred during the request."
    }
  },
  "required": ["llm_type"],
  "oneOf": [
    {
      "properties": {
        "llm_type": { "const": "chat" },
        "messages": { "$ref": "#/properties/messages" }
      },
      "required": ["llm_type", "messages"]
    },
    {
      "properties": {
        "llm_type": { "const": "completion" },
        "completions": { "$ref": "#/properties/completions" }
      },
      "required": ["llm_type", "completions"]
    }
  ],
  "additionalProperties": false
}
